<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>vacca.config &mdash; vacca  documentation</title>
    
    <link rel="stylesheet" href="../../_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="vacca  documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
        <div class="headertitle"><a
          href="../../index.html">vacca  documentation</a></div>
        <div class="rel">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for vacca.config</h1><div class="highlight"><pre>
<span class="c">#!/usr/bin/env python</span>

<span class="c">#############################################################################</span>
<span class="c">##</span>
<span class="c">## This file is part of Taurus, a Tango User Interface Library</span>
<span class="c">## </span>
<span class="c">## http://www.tango-controls.org/static/taurus/latest/doc/html/index.html</span>
<span class="c">##</span>
<span class="c">## Copyright 2011 CELLS / ALBA Synchrotron, Bellaterra, Spain</span>
<span class="c">## </span>
<span class="c">## Taurus is free software: you can redistribute it and/or modify</span>
<span class="c">## it under the terms of the GNU Lesser General Public License as published by</span>
<span class="c">## the Free Software Foundation, either version 3 of the License, or</span>
<span class="c">## (at your option) any later version.</span>
<span class="c">## </span>
<span class="c">## Taurus is distributed in the hope that it will be useful,</span>
<span class="c">## but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c">## MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c">## GNU Lesser General Public License for more details.</span>
<span class="c">## </span>
<span class="c">## You should have received a copy of the GNU Lesser General Public License</span>
<span class="c">## along with Taurus.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c">##</span>
<span class="c">###########################################################################</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">TaurusGUI configuration file used to convert Taurus into VACCA</span>

<span class="sd">This file should be NOT modified.</span>

<span class="sd">.. toctree::</span>
<span class="sd">   :maxdepth: 4</span>

<span class="sd">h2. Usage</span>
<span class="sd">=========</span>

<span class="sd">This configuration file determines the default, permanent, pre-defined</span>
<span class="sd">contents of the GUI. While the user may add/remove more elements at run</span>
<span class="sd">time and those customizations will also be stored, this file defines what a</span>
<span class="sd">user will find when launching the GUI for the first time.</span>

<span class="sd">Don&#39;t modify this file, use default.py to do a simple setup of your</span>
<span class="sd">facility and paths and a CONFIG.py file (based on default.py format) to </span>
<span class="sd">construct a VACCA gui for each subsystem.</span>

<span class="sd">h3. Contents</span>
<span class="sd">------------</span>

<span class="sd">This file mainly defines two kinds of objects:</span>

<span class="sd"> * Panel descriptors: the panels to be shown.</span>
<span class="sd">   To define a panel, instantiate a PanelDescription object (see documentation</span>
<span class="sd">   for the gblgui_utils module)</span>
<span class="sd"> * Panels will be TREE, JDRAW_FILE, DEVICE, ...</span>
<span class="sd">   </span>
<span class="sd"> * QSignals (managed by Taurus Shared Data Manager):</span>
<span class="sd">  * SelectedInstrument: goes from taurusgui and tree into panel/synoptic</span>
<span class="sd">  * SelectionMultiple: goes from panic/finder/... to synoptic to display multiple elements</span>
<span class="sd">  * JDrawIn/JDrawOut: used only if JDRAW_HOOK defined, to transform data between synoptic and selection</span>
<span class="sd">  * lastWindowClosed: signal will close all opened widgets and dialogs on application exit</span>

<span class="sd">h3. Extending Taurus</span>
<span class="sd">--------------------</span>

<span class="sd">Use EXTRA_WIDGETS to add new widgets to the catalog and the right-side toolbar.</span>

<span class="sd">Use EXTRA_PANELS to force new Panels always at startup.</span>

<span class="sd">Use EXTRA_APPS to add launchers to the toolbar.</span>

<span class="sd">Create new AppletDescription objects to add elements to the right-side toolbar.</span>


<span class="sd">h1. Config Variables</span>
<span class="sd">--------------------</span>

<span class="sd">Described below</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c">#==============================================================================</span>
<span class="c"># Import section. You probably want to keep this line. Don&#39;t edit this block </span>
<span class="c"># unless you know what you are doing</span>

<span class="kn">import</span> <span class="nn">time</span><span class="o">,</span><span class="nn">os</span><span class="o">,</span><span class="nn">sys</span><span class="o">,</span><span class="nn">traceback</span><span class="o">,</span><span class="nn">imp</span>
<span class="kn">from</span> <span class="nn">PyQt4.QtCore</span> <span class="kn">import</span> <span class="n">SIGNAL</span>
<span class="kn">import</span> <span class="nn">fandango</span><span class="o">,</span><span class="nn">taurus</span>
<span class="kn">import</span> <span class="nn">vacca</span>
<span class="kn">from</span> <span class="nn">.doc</span> <span class="kn">import</span> <span class="n">get_autodoc</span><span class="p">,</span><span class="n">get_vars_docs</span>
<span class="kn">from</span> <span class="nn">fandango</span> <span class="kn">import</span> <span class="n">partial</span><span class="p">,</span><span class="n">FakeLogger</span> <span class="k">as</span> <span class="n">FL</span>
<span class="kn">from</span> <span class="nn">taurus.qt</span> <span class="kn">import</span> <span class="n">Qt</span>
<span class="kn">from</span> <span class="nn">taurus.qt.qtgui.taurusgui.utils</span> <span class="kn">import</span> <span class="n">PanelDescription</span><span class="p">,</span> <span class="n">ExternalApp</span><span class="p">,</span> <span class="n">ToolBarDescription</span><span class="p">,</span> <span class="n">AppletDescription</span>
<span class="kn">from</span> <span class="nn">vacca.panel</span> <span class="kn">import</span> <span class="n">VaccaAction</span><span class="p">,</span><span class="n">VaccaSplash</span>
<span class="kn">from</span> <span class="nn">vacca.utils</span> <span class="kn">import</span> <span class="n">WORKING_DIR</span><span class="p">,</span><span class="n">wdir</span><span class="p">,</span><span class="n">VACCA_PATH</span><span class="p">,</span><span class="n">vpath</span><span class="p">,</span><span class="n">DB_HOST</span><span class="p">,</span>\
    <span class="n">DEFAULT_PATH</span><span class="p">,</span><span class="n">get_config_file</span>

<span class="c"># (end of import section)</span>
<span class="c">#==============================================================================</span>

<span class="c">#print (&#39;*&#39;*80+&#39;\n&#39;)*1</span>
<span class="k">print</span> <span class="s">&#39;In vacca.config(</span><span class="si">%s</span><span class="s">)&#39;</span><span class="o">%</span><span class="nb">globals</span><span class="p">()</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;CONFIG_DONE&#39;</span><span class="p">,</span><span class="bp">None</span><span class="p">)</span>
<span class="c">#print (&#39;*&#39;*80+&#39;\n&#39;)*1</span>

<span class="n">WDIR</span> <span class="o">=</span> <span class="n">WORKING_DIR</span>
<span class="k">print</span> <span class="s">&#39;WORKING_DIR: </span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">WORKING_DIR</span><span class="p">,</span><span class="n">wdir</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">))</span>
<span class="k">print</span> <span class="s">&#39;VACCA_PATH: </span><span class="si">%s</span><span class="s">:</span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">VACCA_PATH</span><span class="p">,</span><span class="n">vpath</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">))</span>

<span class="k">try</span><span class="p">:</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">app</span> <span class="o">=</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QApplication</span><span class="o">.</span><span class="n">instance</span><span class="p">()</span>
        <span class="k">assert</span> <span class="n">app</span><span class="p">,</span><span class="s">&#39;QApplication not running!&#39;</span>
        <span class="n">splash</span> <span class="o">=</span> <span class="n">VaccaSplash</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&quot;QApplication Instance do not exist!&quot;</span>
        <span class="n">app</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">default</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>        

    <span class="c">#===============================================================================</span>
    <span class="c"># Loading of Config Files</span>
    <span class="c">#===============================================================================</span>

    <span class="n">SETTINGS</span> <span class="o">=</span> <span class="s">&#39;/home/$USER/.config/$ORGANIZATION/$GUI_NAME&#39;</span>

    <span class="c">#: Default options are set in default.py file and later customized in a config file.</span>
    <span class="c">#: This CONFIG can be a .py file passed as argument or a TANGO_HOST.py file in</span>
    <span class="c">#: vacca folder.</span>
    <span class="n">CONFIG</span> <span class="o">=</span> <span class="n">get_config_file</span><span class="p">()</span>

    <span class="c">#: ALL Variables that can be defined in CONFIG FILE</span>
    <span class="n">OPTION_LISTS</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">(</span><span class="s">&#39;General Info&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;GUI_NAME&#39;</span><span class="p">,</span><span class="s">&#39;URL_HELP&#39;</span><span class="p">,</span><span class="s">&#39;URL_LOGBOOK&#39;</span><span class="p">,</span><span class="s">&#39;VACCA_LOGO&#39;</span><span class="p">,</span><span class="s">&#39;ORGANIZATION&#39;</span><span class="p">,</span><span class="s">&#39;ORGANIZATION_LOGO&#39;</span><span class="p">,]),</span>
        <span class="p">(</span><span class="s">&#39;Installation&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;WDIR&#39;</span><span class="p">,</span><span class="s">&#39;SETTINGS&#39;</span><span class="p">]),</span>
        <span class="p">(</span><span class="s">&#39;Sub systems&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;DOMAIN&#39;</span><span class="p">,</span><span class="s">&#39;TARGET&#39;</span><span class="p">,</span><span class="s">&#39;COMPOSER&#39;</span><span class="p">,]),</span>
        <span class="p">(</span><span class="s">&#39;Device Tree&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;USE_DEVICE_TREE&#39;</span><span class="p">,</span><span class="s">&#39;CUSTOM_TREE&#39;</span><span class="p">,</span><span class="s">&#39;EXTRA_DEVICES&#39;</span><span class="p">,]),</span>
        <span class="p">(</span><span class="s">&#39;Synoptics&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;JDRAW_FILE&#39;</span><span class="p">,</span><span class="s">&#39;JDRAW_TREE&#39;</span><span class="p">,</span><span class="s">&#39;JDRAW_HOOK&#39;</span><span class="p">,</span><span class="s">&#39;GRID&#39;</span><span class="p">,]),</span>
        <span class="p">(</span><span class="s">&#39;Device Panel&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;USE_DEVICE_PANEL&#39;</span><span class="p">,</span><span class="s">&#39;DEVICE&#39;</span><span class="p">,</span><span class="s">&#39;PANEL_COMMAND&#39;</span><span class="p">,</span><span class="s">&#39;AttributeFilters&#39;</span><span class="p">,</span><span class="s">&#39;CommandFilters&#39;</span><span class="p">,</span><span class="s">&#39;IconMap&#39;</span><span class="p">,]),</span>
        <span class="p">(</span><span class="s">&#39;Plot&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;GAUGES&#39;</span><span class="p">]),</span>
        <span class="p">(</span><span class="s">&#39;Widgets&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;EXTRA_WIDGETS&#39;</span><span class="p">,</span><span class="s">&#39;EXTRA_PANELS&#39;</span><span class="p">,</span><span class="s">&#39;TOOLBARS&#39;</span><span class="p">,</span><span class="s">&#39;EXTRA_APPS&#39;</span><span class="p">,</span><span class="s">&#39;EXTRA_CATALOG_WIDGETS&#39;</span><span class="p">]),]</span>

    <span class="n">OPTIONS</span> <span class="o">=</span> <span class="p">[</span><span class="n">o</span> <span class="k">for</span> <span class="n">c</span><span class="p">,</span><span class="n">l</span> <span class="ow">in</span> <span class="n">OPTION_LISTS</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">l</span><span class="p">]</span>
    
    <span class="k">for</span> <span class="n">c</span><span class="p">,</span><span class="n">l</span> <span class="ow">in</span> <span class="n">OPTION_LISTS</span><span class="p">:</span>
        <span class="n">__doc__</span> <span class="o">+=</span> <span class="n">get_vars_docs</span><span class="p">(</span><span class="n">__name__</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="n">c</span><span class="o">+</span><span class="s">&#39; Options&#39;</span><span class="p">,</span><span class="n">module_vars</span><span class="o">=</span><span class="n">l</span><span class="p">,</span><span class="n">subtitle</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    
    <span class="k">if</span> <span class="n">CONFIG</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">op</span> <span class="ow">in</span> <span class="n">OPTIONS</span><span class="p">:</span>
            <span class="n">limit</span> <span class="o">=</span> <span class="mi">800</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">CONFIG</span><span class="p">,</span><span class="n">op</span><span class="p">):</span>
                <span class="n">v</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">CONFIG</span><span class="p">,</span><span class="n">op</span><span class="p">)</span>
                <span class="k">print</span> <span class="s">&#39;</span><span class="se">\t</span><span class="si">%s</span><span class="s">: </span><span class="se">\t</span><span class="si">%s</span><span class="s"> = </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">CONFIG</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span><span class="n">op</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)[:</span><span class="n">limit</span><span class="p">])</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">default</span><span class="p">,</span><span class="n">op</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">CONFIG</span><span class="p">,</span><span class="s">&#39;COMPOSER&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">CONFIG</span><span class="p">,</span><span class="s">&#39;DEVICE&#39;</span><span class="p">):</span>
            <span class="n">default</span><span class="o">.</span><span class="n">DEVICE</span> <span class="o">=</span> <span class="n">default</span><span class="o">.</span><span class="n">COMPOSER</span>
            
        <span class="c">#Trying to Load rith-toolbar apps from dictionary (NOTE: this doesn&#39;t work)</span>
        <span class="c">#if hasattr(CONFIG,&#39;EXTRA_APPS&#39;): </span>
            <span class="c">#print &#39;Loading %s apps from %s&#39;%(str(CONFIG.EXTRA_APPS.keys()),CONFIG.__name__)</span>
            <span class="c">#[setattr(default,X,AppletDescription(**app)) for X,app in CONFIG.EXTRA_APPS.items()]</span>
    
    <span class="c">#Adding Variables to Namespace where taurusgui can found them</span>
    <span class="kn">from</span> <span class="nn">default</span> <span class="kn">import</span> <span class="o">*</span>
    
    <span class="c">#===============================================================================</span>
    <span class="c"># General info.</span>
    <span class="c">#===============================================================================</span>
    <span class="n">GUI_NAME</span> <span class="o">=</span> <span class="s">&#39;</span><span class="si">%s</span><span class="s">-</span><span class="si">%s</span><span class="s"> at </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">GUI_NAME</span><span class="p">,</span><span class="nb">getattr</span><span class="p">(</span><span class="n">CONFIG</span><span class="p">,</span><span class="s">&#39;__name__&#39;</span><span class="p">,</span><span class="n">TARGET</span><span class="p">),</span><span class="n">DB_HOST</span><span class="p">)</span>
    <span class="n">ORGANIZATION</span> <span class="o">=</span> <span class="s">&#39;VACCA&#39;</span>
    <span class="n">ORGANIZATION_LOGO</span> <span class="o">=</span> <span class="n">ORGANIZATION_LOGO</span>
    
    <span class="n">SINGLE_INSTANCE</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="c">#: CUSTOM_LOGO. It can be an absolute path,or relative to the app dir or a</span>
    <span class="c">#: resource path. If commented out, &quot;:/taurus.png&quot; will be used</span>
    <span class="n">CUSTOM_LOGO</span> <span class="o">=</span> <span class="n">VACCA_LOGO</span>

    <span class="c">#: You can provide an URI for a manual in html format</span>
    <span class="c">#: (comment out or make MANUAL_URI=None to skip creating a Manual panel)</span>
    <span class="n">MANUAL_URI</span> <span class="o">=</span> <span class="n">URL_HELP</span> <span class="c">#&#39;http://packages.python.org/taurus&#39;</span>

    <span class="c">#===============================================================================</span>
    <span class="c"># Define panels to be shown.</span>
    <span class="c"># To define a panel, instantiate a PanelDescription object (see documentation</span>
    <span class="c"># for the gblgui_utils module)</span>
    <span class="c">#===============================================================================</span>
    
    <span class="k">print</span> <span class="s">&#39;&gt;&#39;</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="s">&#39;Loading Trend panel ... </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">GAUGES</span><span class="p">)</span>
    <span class="n">trend</span> <span class="o">=</span> <span class="n">PanelDescription</span><span class="p">(</span><span class="s">&#39;Gauges&#39;</span><span class="p">,</span>
                        <span class="n">classname</span> <span class="o">=</span> <span class="s">&#39;vacca.plot.PressureTrend&#39;</span><span class="p">,</span>
                        <span class="n">model</span> <span class="o">=</span> <span class="n">GAUGES</span><span class="p">)</span>

    <span class="c">#: USE_DEVICE_PANEL:  True or False, To Show by default the DevicePanel</span>
    <span class="n">USE_DEVICE_PANEL</span> <span class="o">=</span> <span class="n">USE_DEVICE_PANEL</span>

    <span class="k">if</span> <span class="n">USE_DEVICE_PANEL</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;&gt;&#39;</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="s">&#39;Loading Device panel ...&#39;</span>
        <span class="kn">from</span> <span class="nn">vacca.panel</span> <span class="kn">import</span> <span class="n">VaccaPanel</span>
        <span class="n">panel</span> <span class="o">=</span> <span class="n">VaccaPanel</span><span class="o">.</span><span class="n">getPanelDescription</span><span class="p">(</span><span class="s">&#39;Device&#39;</span><span class="p">)</span>

    <span class="c">#: USE_DEVICE_TREE:  True or False, To Show by default the Device_Tree</span>
    <span class="n">USE_DEVICE_TREE</span> <span class="o">=</span> <span class="n">USE_DEVICE_TREE</span>

    <span class="k">if</span> <span class="n">USE_DEVICE_TREE</span> <span class="ow">or</span> <span class="n">JDRAW_FILE</span> <span class="ow">or</span> <span class="n">EXTRA_DEVICES</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;&gt;&#39;</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="s">&#39;Loading Tree panel ...&#39;</span>
        <span class="kn">from</span> <span class="nn">tree</span> <span class="kn">import</span> <span class="o">*</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c"># The lastWindowClosed() signal will close all opened widgets and dialogs on application exit</span>
            <span class="k">assert</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QApplication</span><span class="o">.</span><span class="n">instance</span><span class="p">(),</span><span class="s">&#39;QApplication not running!&#39;</span>
            <span class="n">panelclass</span> <span class="o">=</span> <span class="n">VaccaAction</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="n">PANEL_COMMAND</span><span class="p">)</span>
            <span class="n">Qt</span><span class="o">.</span><span class="n">QObject</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">QApplication</span><span class="o">.</span><span class="n">instance</span><span class="p">(),</span> <span class="n">Qt</span><span class="o">.</span><span class="n">SIGNAL</span><span class="p">(</span>
             <span class="s">&quot;lastWindowClosed()&quot;</span><span class="p">),</span> <span class="n">panelclass</span><span class="o">.</span><span class="n">kill</span> <span class="p">)</span>
            <span class="n">VaccaTree</span><span class="o">.</span><span class="n">setDefaultPanelClass</span><span class="p">(</span><span class="n">panelclass</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&quot;Cannot instance Device Tree&quot;</span><span class="p">)</span>
        <span class="n">logger</span> <span class="o">=</span> <span class="n">fandango</span><span class="o">.</span><span class="n">Logger</span><span class="p">()</span>
        <span class="n">printf</span> <span class="o">=</span> <span class="n">logger</span><span class="o">.</span><span class="n">info</span>

<div class="viewcode-block" id="filterMatching"><a class="viewcode-back" href="../../vacca.config.html#vacca.config.filterMatching">[docs]</a>        <span class="k">def</span> <span class="nf">filterMatching</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">dct</span><span class="o">=</span><span class="n">AttributeFilters</span><span class="p">,</span><span class="n">p</span><span class="o">=</span><span class="n">printf</span><span class="p">):</span>
            <span class="n">match</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">if</span> <span class="n">a</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;/state&#39;</span><span class="p">):</span> <span class="k">return</span> <span class="bp">True</span>
            <span class="k">elif</span> <span class="n">a</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">&#39;/status&#39;</span><span class="p">):</span> <span class="k">return</span> <span class="bp">False</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">l</span> <span class="ow">in</span> <span class="n">dct</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">fandango</span><span class="o">.</span><span class="n">searchCl</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]):</span>
                    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">l</span><span class="p">:</span> <span class="c">#T is every declared Tab for panel (TabName,[attrlist]); or just attrname when not using tabs</span>
                        <span class="n">p</span><span class="p">((</span><span class="n">k</span><span class="p">,</span><span class="n">t</span><span class="p">))</span>
                        <span class="n">f</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">fandango</span><span class="o">.</span><span class="n">isSequence</span><span class="p">,(</span><span class="n">t</span><span class="p">,</span><span class="n">t</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])))</span> <span class="k">else</span> <span class="p">[</span><span class="n">t</span><span class="p">]</span>
                        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">fandango</span><span class="o">.</span><span class="n">matchCl</span><span class="p">(</span><span class="n">v</span><span class="p">,</span><span class="n">a</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s">&#39;/&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">f</span><span class="p">):</span> 
                            <span class="n">match</span> <span class="o">=</span><span class="bp">True</span>
            <span class="k">return</span> <span class="n">match</span></div>
        <span class="n">VaccaTree</span><span class="o">.</span><span class="n">setDefaultAttrFilter</span><span class="p">(</span><span class="n">filterMatching</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">IconMap</span><span class="p">:</span> <span class="n">VaccaTree</span><span class="o">.</span><span class="n">setIconMap</span><span class="p">(</span><span class="n">IconMap</span><span class="p">)</span>
        <span class="n">tree</span> <span class="o">=</span> <span class="n">PanelDescription</span><span class="p">(</span><span class="s">&#39;Tree&#39;</span><span class="p">,</span>
                            <span class="n">classname</span> <span class="o">=</span> <span class="s">&#39;vacca.VaccaTree&#39;</span><span class="p">,</span><span class="c">#&#39;vacca.VaccaTree&#39;,#&#39;TaurusDevTree&#39;,</span>
                            <span class="n">model</span> <span class="o">=</span> <span class="n">CUSTOM_TREE</span> <span class="ow">or</span> <span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">EXTRA_DEVICES</span><span class="p">),</span>
                            <span class="n">sharedDataRead</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;LoadItems&#39;</span><span class="p">:</span><span class="s">&#39;addModels&#39;</span><span class="p">,</span>
                                <span class="c">##DISABLED BECAUSE TRIGGERED RECURSIVE SELECTION, TO BE AVOIDED IN TREE</span>
                                <span class="c">#&#39;SelectedInstrument&#39;:&#39;findInTree&#39;,</span>
                                <span class="p">},</span> <span class="c">#It will load devices from synoptic</span>
                            <span class="n">sharedDataWrite</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;SelectedInstrument&#39;</span><span class="p">:</span><span class="s">&#39;deviceSelected(QString)&#39;</span><span class="p">}</span>
                            <span class="p">)</span>

    <span class="c">#: JDRAW_FILE:  The JDRAW file to create the Synoptic, </span>
    <span class="c">#: it can be .jdw or .svg but the second option will require the svgsynoptic module from maxlab.</span>
    <span class="n">JDRAW_FILE</span> <span class="o">=</span> <span class="n">JDRAW_FILE</span>

    <span class="k">if</span> <span class="n">JDRAW_FILE</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;&gt;&#39;</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="s">&#39;Loading Synoptic panel new ... </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">, </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">JDRAW_FILE</span><span class="p">,</span>
                                                         <span class="n">JDRAW_HOOK</span><span class="p">,</span> <span class="n">JDRAW_TREE</span><span class="p">)</span>
        <span class="k">print</span> <span class="s">&#39;&gt;&#39;</span><span class="o">*</span><span class="mi">20</span>
        <span class="k">print</span> <span class="s">&#39;&gt;&#39;</span><span class="o">*</span><span class="mi">20</span>
        <span class="k">print</span> <span class="s">&#39;&gt;&#39;</span><span class="o">*</span><span class="mi">20</span>
        <span class="kn">from</span> <span class="nn">vacca.synoptics</span> <span class="kn">import</span> <span class="n">VaccaSynoptic</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">synoptic</span> <span class="o">=</span> <span class="n">VaccaSynoptic</span><span class="o">.</span><span class="n">getPanelDescription</span><span class="p">(</span><span class="s">&#39;Synoptic&#39;</span><span class="p">,</span><span class="n">JDRAW_FILE</span><span class="p">,</span><span class="n">JDRAW_HOOK</span><span class="p">,</span><span class="n">JDRAW_TREE</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>

    <span class="c">#: GRID:  True/False to show by default ehe GRID Panel.</span>
    <span class="n">GRID</span> <span class="o">=</span> <span class="n">GRID</span>


    <span class="k">if</span> <span class="n">GRID</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;&gt;&#39;</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="s">&#39;Loading Grid panels ...&#39;</span>
        
        <span class="n">GRID</span><span class="p">[</span><span class="s">&#39;frames&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">GRID</span><span class="p">[</span><span class="s">&#39;labels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">GRID</span><span class="p">[</span><span class="s">&#39;units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
        
        <span class="kn">from</span> <span class="nn">vacca.grid</span> <span class="kn">import</span> <span class="n">VaccaGrid</span><span class="p">,</span> <span class="n">VaccaVerticalGrid</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">assert</span> <span class="n">Qt</span><span class="o">.</span><span class="n">QApplication</span><span class="o">.</span><span class="n">instance</span><span class="p">(),</span><span class="s">&#39;QApplication not running!&#39;</span>
            <span class="n">grid</span> <span class="o">=</span> <span class="n">VaccaGrid</span><span class="o">.</span><span class="n">getGridPanelDescription</span><span class="p">(</span><span class="n">GRID</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;Unable to create Grid&#39;</span>

        <span class="c">##VGRID disabled, the Vertical layout should be added as option to common GRID</span>
        <span class="c">#try:</span>
            <span class="c">#assert Qt.QApplication.instance(),&#39;QApplication not running!&#39;</span>
            <span class="c">#vgrid = VaccaVerticalGrid.getVerticalGridPanelDescription(GRID)</span>
        <span class="c">#except:</span>
            <span class="c">#print &#39;Unable to create VerticalGrid&#39;</span>

    <span class="c">#: COMPOSER:  True/False to show by default the COMPOSER Panel.</span>
    <span class="n">COMPOSER</span> <span class="o">=</span> <span class="n">COMPOSER</span>

    <span class="k">if</span> <span class="n">COMPOSER</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">VacuumProfile</span><span class="p">():</span>
            <span class="k">print</span> <span class="s">&#39;VacuumProfile()&#39;</span>
            <span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">plot</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">plot</span><span class="o">.</span><span class="n">VaccaProfilePlot</span><span class="p">()</span>
            <span class="n">p</span><span class="o">.</span><span class="n">setModel</span><span class="p">(</span><span class="n">COMPOSER</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">p</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;&gt;&#39;</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="s">&#39;Loading Profile panel ...&#39;</span>
            <span class="n">profile</span> <span class="o">=</span> <span class="n">PanelDescription</span><span class="p">(</span><span class="s">&#39;Profile&#39;</span><span class="p">,</span>
                            <span class="n">classname</span> <span class="o">=</span> <span class="s">&#39;vacca.plot.VaccaProfilePlot&#39;</span><span class="p">,</span>
                            <span class="n">model</span> <span class="o">=</span> <span class="n">COMPOSER</span><span class="p">,</span>
                            <span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">print</span> <span class="s">&#39;Unable to create ProfilePlot&#39;</span>
            
    <span class="kn">import</span> <span class="nn">vacca.properties</span>
    <span class="n">properties</span> <span class="o">=</span> <span class="n">vacca</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">VaccaPropTable</span><span class="o">.</span><span class="n">getPanelDescription</span><span class="p">(</span><span class="s">&#39;Properties&#39;</span><span class="p">)</span>


    <span class="c">#: EXTRA_PANELS:  dictionary of Extra Panels to be shown by default.</span>
    <span class="c">#: Each element may be a PanelDescription object or a tuple with its arguments.</span>
    <span class="c">#:</span>
    <span class="c">#: The dictionary will be defined like:</span>
    <span class="c">#:  * key: Panel name</span>
    <span class="c">#:  * value: list of arguments to PanelDescription</span>
    <span class="c">#:  * value[0]: panel name</span>
    <span class="c">#:  * value[1]: class name</span>
    <span class="c">#:  * value[2]: default model</span>
    <span class="c">#:  * value[3]: shared data read signal</span>
    <span class="c">#:  * value[4]: shared data write signal</span>
    <span class="c">#:</span>
    <span class="c">#: As example, to add PANIC as extra panel use:</span>
    <span class="c">#: EXTRA_PANELS[&#39;PANIC&#39;] = (&#39;PANIC&#39;,&#39;panic.gui.AlarmGUI&#39;,&#39;&#39;,{},{&#39;HighlightInstruments&#39;:&#39;devicesSelected&#39;})</span>
    <span class="n">EXTRA_PANELS</span> <span class="o">=</span> <span class="n">EXTRA_PANELS</span>

    <span class="k">if</span> <span class="n">EXTRA_PANELS</span><span class="p">:</span>
        <span class="k">print</span> <span class="s">&#39;&gt;&#39;</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="s">&#39;Loading Extra panels ... </span><span class="si">%s</span><span class="s">&#39;</span><span class="o">%</span><span class="nb">str</span><span class="p">(</span><span class="n">EXTRA_PANELS</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">fandango</span><span class="o">.</span><span class="n">isMapping</span><span class="p">(</span><span class="n">EXTRA_PANELS</span><span class="p">):</span>
            <span class="n">EXTRA_PANELS</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">((</span><span class="s">&#39;extra</span><span class="si">%d</span><span class="s">&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span><span class="n">p</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">EXTRA_PANELS</span><span class="p">))</span>
            
        <span class="k">def</span> <span class="nf">get_panel</span><span class="p">(</span><span class="n">i</span><span class="p">):</span>
            <span class="n">pargs</span> <span class="o">=</span> <span class="n">EXTRA_PANELS</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">fandango</span><span class="o">.</span><span class="n">isSequence</span><span class="p">(</span><span class="n">pargs</span><span class="p">):</span> <span class="k">return</span> <span class="n">pargs</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">pargs</span><span class="p">)</span><span class="o">==</span><span class="mi">3</span><span class="p">:</span> <span class="k">return</span> <span class="n">PanelDescription</span><span class="p">(</span><span class="n">pargs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">classname</span><span class="o">=</span><span class="n">pargs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">model</span><span class="o">=</span><span class="n">pargs</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span> <span class="k">return</span> <span class="n">PanelDescription</span><span class="p">(</span><span class="n">pargs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">classname</span><span class="o">=</span><span class="n">pargs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">model</span><span class="o">=</span><span class="n">pargs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">sharedDataRead</span><span class="o">=</span><span class="n">pargs</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">sharedDataWrite</span><span class="o">=</span><span class="n">pargs</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">p</span> <span class="ow">in</span> <span class="n">EXTRA_PANELS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="nb">vars</span><span class="p">()[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_panel</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>

    <span class="n">toolbars</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span><span class="n">obj</span> <span class="ow">in</span> <span class="p">(</span><span class="n">TOOLBARS</span> <span class="ow">or</span> <span class="p">[]):</span>
        <span class="n">toolbars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ToolBarDescription</span><span class="p">(</span><span class="n">name</span><span class="p">,</span>
            <span class="n">classname</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">modulename</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s">&#39;.&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span>
            <span class="c">#sharedDataWrite={&#39;selectedPerspective&#39;:&#39;blabla&#39;}</span>
            <span class="p">))</span>
        <span class="n">toolbar</span> <span class="o">=</span> <span class="n">toolbars</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    
    <span class="c">#===============================================================================</span>
    <span class="c">#: EXTRA_WIDGETS: The Dictionary of EXTRA_WIDGETS Panels</span>
    <span class="c">#:</span>
    <span class="c">#: Adding other widgets to the catalog of the &quot;new panel&quot; dialog.</span>
    <span class="c">#: pass a tuple of (classname,screenshot)</span>
    <span class="c">#:</span>
    <span class="c">#: - classname may contain the module name.</span>
    <span class="c">#: - screenshot can either be a file name relative to the application dir or</span>
    <span class="c">#:   a resource URL or None</span>
    <span class="c">#:</span>
    <span class="c">#: examples:</span>
    <span class="c">#:</span>
    <span class="c">#:    (&#39;vacca.properties.VaccaPropTable&#39;,wdir(&#39;vacca/image/widgets/Properties.png&#39;)),</span>
    <span class="c">#:    (&#39;vacca.panel.VaccaPanel&#39;,wdir(&#39;vacca/image/widgets/Panel.png&#39;)),</span>
    <span class="n">EXTRA_WIDGETS</span> <span class="o">=</span> <span class="n">EXTRA_WIDGETS</span>

    <span class="c">#: EXTRA_CATALOG_WIDGETS: The Dictionary of EXTRA_CATALOG_WIDGETS Panels to Show by</span>
    <span class="c">#: default.</span>
    <span class="c">#:Is the Sum of EXTRA_WIDGETS and the custom Widgets defined in config.py</span>
    <span class="n">EXTRA_CATALOG_WIDGETS</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">EXTRA_CATALOG_WIDGETS</span> <span class="o">=</span> <span class="n">EXTRA_WIDGETS</span><span class="o">+</span><span class="p">[</span>
        <span class="c">#(&#39;vacca.VacuumProfile&#39;,WDIR+&#39;image/ProfilePlot.jpg&#39;),</span>
        <span class="c">#(&#39;vacca.plot.PressureTrend&#39;,WDIR+&#39;image/PressureTrend.jpg&#39;),</span>
        <span class="c">#(&#39;vacca.VacuumGrid&#39;,WDIR+&#39;image/BLGrid.jpg&#39;),</span>
        <span class="c">#(&#39;vacca.VerticalGrid&#39;,WDIR+&#39;image/VerticalGrid.jpg&#39;),</span>
        <span class="p">(</span><span class="s">&#39;vacca.properties.VaccaPropTable&#39;</span><span class="p">,</span><span class="n">wdir</span><span class="p">(</span><span class="s">&#39;vacca/image/widgets/Properties.png&#39;</span><span class="p">)),</span>
        <span class="p">(</span><span class="s">&#39;fandango.qt.QEvaluator&#39;</span><span class="p">,</span><span class="s">&#39;:/snapshot/large/snapshot/TaurusShell.png&#39;</span><span class="p">),</span>
        <span class="p">]</span>

    <span class="c">#===============================================================================</span>
    <span class="c"># Define custom toolbars to be shown. To define a toolbar, instantiate a</span>
    <span class="c"># ToolbarDescription object (see documentation for the gblgui_utils module)</span>
    <span class="c">#===============================================================================</span>
    
    <span class="c">#dummytoolbar = ToolBarDescription(&#39;Empty Toolbar&#39;,</span>
                            <span class="c">#classname = &#39;QToolBar&#39;,</span>
                            <span class="c">#modulename = &#39;PyQt4.Qt&#39;)</span>
    
    <span class="c">#panictoolbar = ToolBarDescription(&#39;Panic Toolbar&#39;,</span>
    <span class="c">#                        classname = &#39;PanicToolbar&#39;,</span>
    <span class="c">#                        modulename = &#39;tangopanic&#39;)</span>
    
    <span class="c">#===============================================================================</span>
    <span class="c"># Define custom applets to be shown in the applets bar (the wide bar that</span>
    <span class="c"># contains the logos). To define an applet, instantiate an AppletDescription</span>
    <span class="c"># object (see documentation for the gblgui_utils module)</span>
    <span class="c">#===============================================================================</span>
    
    <span class="c">#mon2 = AppletDescription(&#39;Dummy Monitor&#39;,</span>
                            <span class="c">#classname = &#39;TaurusMonitorTiny&#39;,</span>
                            <span class="c">#model=&#39;eval://1000*rand(2)&#39;)</span>
    <span class="c">#import os</span>
    <span class="c">#xmambo = AppletDescription(&#39;ctarchiving&#39;,</span>
                            <span class="c">#classname = &#39;vacca.panel.VaccaAction&#39;,</span>
                            <span class="c">#model=[&quot;Archiving&quot;,WDIR+&#39;image/PressureTrend.jpg&#39;,&#39;ctarchiving&#39;],</span>
                            <span class="c">#)</span>
    
    <span class="c"># ALREADY LOADED FROM vacca.default.EXTRA_APPS</span>
    
    <span class="c">#===============================================================================</span>
    <span class="c"># Define which External Applications are to be inserted.</span>
    <span class="c"># To define an external application, instantiate an ExternalApp object</span>
    <span class="c"># See TaurusMainWindow.addExternalAppLauncher for valid values of ExternalApp</span>
    <span class="c">#===============================================================================</span>

    <span class="n">xvacca</span> <span class="o">=</span> <span class="n">ExternalApp</span><span class="p">(</span><span class="n">cmdargs</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;konqueror&#39;</span><span class="p">,</span><span class="n">URL_HELP</span><span class="p">],</span> <span class="n">text</span><span class="o">=</span><span class="s">&quot;Alba VACuum Controls Application&quot;</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="n">WDIR</span><span class="o">+</span><span class="s">&#39;image/icons/cow-tux.png&#39;</span><span class="p">)</span>
    <span class="n">xjive</span> <span class="o">=</span> <span class="n">ExternalApp</span><span class="p">(</span><span class="n">cmdargs</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;jive&#39;</span><span class="p">],</span> <span class="n">text</span><span class="o">=</span><span class="s">&quot;Jive&quot;</span><span class="p">)</span><span class="c">#, icon=WDIR+&#39;image/icons/cow-tux.png&#39;)</span>
    <span class="n">xastor</span> <span class="o">=</span> <span class="n">ExternalApp</span><span class="p">(</span><span class="n">cmdargs</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;astor&#39;</span><span class="p">],</span> <span class="n">text</span><span class="o">=</span><span class="s">&quot;Astor&quot;</span><span class="p">)</span><span class="c">#, icon=WDIR+&#39;image/icons/cow-tux.png&#39;)</span>
    
    <span class="c">#===============================================================================</span>
    <span class="c"># POOL RELATED OPTIONS</span>
    <span class="c">#===============================================================================</span>
    
    <span class="c">#===============================================================================</span>
    <span class="c"># Macro execution configuration</span>
    <span class="c"># (comment out or make MACRO_SERVER=None to skip creating a macro execution </span>
    <span class="c"># infrastructure)</span>
    <span class="c">#===============================================================================</span>
    <span class="c">#MACROSERVER_NAME = </span>
    <span class="c">#DOOR_NAME = </span>
    <span class="c">#MACROEDITORS_PATH = </span>
    
    <span class="c">#===============================================================================</span>
    <span class="c"># Monitor widget (This is obsolete now, you can get the same result defining a</span>
    <span class="c"># custom applet with classname=&#39;TaurusMonitorTiny&#39;)</span>
    <span class="c">#===============================================================================</span>
    <span class="c"># MONITOR = [&#39;sys/tg_test/1/double_scalar_rww&#39;]</span>
    
    <span class="c"># Set INSTRUMENTS_FROM_POOL to True for enabling auto-creation of</span>
    <span class="c"># instrument panels based on the Pool Instrument info</span>
    <span class="n">INSTRUMENTS_FROM_POOL</span> <span class="o">=</span> <span class="bp">False</span>
    
    <span class="c">#===============================================================================</span>
    <span class="c"># THIS SYNOPTIC OPTION IS POOL-related; IT&#39;S NOT THE MAIN APPLICATION SYNOPTIC!!!</span>
    <span class="c"># If you want an instrument selection synoptic, set the SYNOPTIC variable</span>
    <span class="c"># to the file name of a jdraw file. If a relative path is given, the directory</span>
    <span class="c"># containing this configuration file will be used as root</span>
    <span class="c"># (comment out or make SYNOPTIC=None to skip creating a synoptic panel)</span>
    <span class="c">#===============================================================================</span>
    <span class="n">SYNOPTIC</span> <span class="o">=</span> <span class="p">[]</span> <span class="c">#&#39;images/example01.jdw&#39;,&#39;images/syn2.jdw&#39;]    </span>
    
    <span class="c">#===============================================================================</span>

    <span class="c">#: </span>
    <span class="kn">from</span> <span class="nn">PyQt4</span> <span class="kn">import</span> <span class="n">Qt</span>

    <span class="n">EXTRA_APPS</span> <span class="o">=</span> <span class="n">EXTRA_APPS</span>
    <span class="sd">&quot;&quot;&quot; The Vacca Panels to show in the JogsBar. Use EXTRA_APPS to add launchers to the toolbar.</span>
<span class="sd">    It will create new AppletDescription objects to add elements to the right-side toolbar.</span>

<span class="sd">    Examples:</span>
<span class="sd">     * EXTRA_APPS[&#39;Properties&#39;] = {&#39;class&#39; : vacca.VaccaPropTable}</span>
<span class="sd">     * EXTRA_APPS[&#39;DevicePanel&#39;] = {&#39;class&#39; : vacca.VaccaPanel}</span>
<span class="sd">     * EXTRA_APPS[&#39;Panic&#39;]= {&#39;class&#39; : vacca.VaccaPanic       }</span>
<span class="sd">     * EXTRA_APPS[&#39;ExtraDock&#39;]= {&#39;class&#39; : Qt.QMainWindow       }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">adder</span> <span class="o">=</span> <span class="n">vacca</span><span class="o">.</span><span class="n">addCustomPanel2Gui</span><span class="p">(</span><span class="n">EXTRA_APPS</span><span class="p">)</span>
    
    <span class="c">#Forcing nesting of dock widgets</span>
    <span class="k">if</span> <span class="n">app</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">main</span> <span class="o">=</span> <span class="n">fandango</span><span class="o">.</span><span class="n">first</span><span class="p">((</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">allWidgets</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">Qt</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">)),</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
            <span class="n">main</span><span class="o">.</span><span class="n">setDockNestingEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">traceback</span><span class="o">.</span><span class="n">print_exc</span><span class="p">()</span>

    <span class="k">print</span> <span class="s">&#39;&gt;&#39;</span><span class="o">*</span><span class="mi">20</span><span class="o">+</span><span class="s">&#39;Config Finished ...&#39;</span>
    <span class="nb">globals</span><span class="p">()[</span><span class="s">&#39;CONFIG_DONE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">except</span><span class="p">:</span>
    <span class="k">print</span> <span class="n">traceback</span><span class="o">.</span><span class="n">format_exc</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference internal" href="../../readme.html">Welcome to vacca&#8217;s documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.html">vacca package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.config.html">vacca.config module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.utils.html">vacca.utils module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.setup.html">vacca.setup module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.doc.html">vacca.doc module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.default.html">vacca.default module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.panel.html">vacca.panel module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.plot.html">vacca.plot module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.properties.html">vacca.properties module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.synoptics.html">vacca.synoptics module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.tree.html">vacca.tree module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.alarms.html">vacca.alarms module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vacca.grid.html">vacca.grid module</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="../../search.html" method="get">
            <input type="text" name="q" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="../../genindex.html" title="General Index"
             >index</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2015, Author.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>